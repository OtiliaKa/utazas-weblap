<%- include('partials/header', {currentPage: 'crud'}) %>

<!-- Main -->
<div id="main">
    <article class="post">
        <header class="major">
            <h1>Sz√°lloda Kezel√©s</h1>
            <p>CRUD m≈±veletek a sz√°llod√°k kezel√©s√©hez</p>
        </header>

        <!-- √úzenetek -->
        <% if (typeof success !== 'undefined' && success) { %>
        <div class="alert success">
            <strong>‚úÖ Sikeres!</strong> <%= success %>
        </div>
        <% } %>
        
        <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert error">
            <strong>‚ùå Hiba!</strong> <%= error %>
        </div>
        <% } %>

        <!-- √öj sz√°lloda gomb -->
        <% if (user && user.szerepkor == 'admin') { %>
        <div style="margin-bottom: 2rem;">
            <a href="/app116/crud/uj" class="button primary">‚ûï √öj Sz√°lloda</a>
        </div>
        <% } %>

        <!-- Sz√°llod√°k t√°bl√°zata -->
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>K√≥d</th>
                        <th>Sz√°lloda Neve</th>
                        <th>Besorol√°s</th>
                        <th>Helys√©g</th>
                        <th>Tengerpart</th>
                        <th>Rep√ºlt√©r</th>
                        <th>F√©lpanzi√≥</th>
                        <% if (user && user.szerepkor == 'admin') { %>
                        <th>M≈±veletek</th>
                        <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% if (szallodak.length > 0) { %>
                        <% szallodak.forEach(szalloda => { %>
                        <tr>
                            <td><strong><%= szalloda.az %></strong></td>
                            <td><%= szalloda.nev %></td>
                            <td>
                                <% for (let i = 0; i < szalloda.besorolas; i++) { %>
                                ‚≠ê
                                <% } %>
                            </td>
                            <td><%= szalloda.helyseg_nev %> (<%= szalloda.orszag %>)</td>
                            <td>
                                <% if (szalloda.tengerpart_tav === 0) { %>
                                Parti
                                <% } else { %>
                                <%= szalloda.tengerpart_tav %> m
                                <% } %>
                            </td>
                            <td><%= szalloda.repter_tav %> km</td>
                            <td><%= szalloda.felpanzio ? '‚úÖ Igen' : '‚ùå Nem' %></td>
                            <td>
                                <% if (user && user.szerepkor == 'admin') { %>
                                <a href="/app116/crud/szerkesztes/<%= szalloda.az %>" class="button small">‚úèÔ∏è Szerkeszt√©s</a>
                                <form action="/app116/crud/torles/<%= szalloda.az %>" method="POST" style="display: inline;">
                                    <button type="submit" class="button small" onclick="return confirm('Biztosan t√∂r√∂lni szeretn√© ezt a sz√°llod√°t?')">üóëÔ∏è T√∂rl√©s</button>
                                </form>
                                <% } %>
                            </td>
                        </tr>
                        <% }); %>
                    <% } else { %>
                        <tr>
                            <td colspan="8" style="text-align: center;">M√©g nincsenek sz√°llod√°k</td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>

        <p>√ñsszesen <strong><%= szallodak.length %></strong> sz√°lloda</p>
    </article>
</div>

<style>
.alert {
    padding: 1rem;
    margin: 1rem 0;
    border-radius: 5px;
}
.alert.success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}
.alert.error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}
.button.small {
    padding: 0.3rem 0.6rem;
    font-size: 0.8rem;
    margin: 0.1rem;
}
</style>

<%- include('partials/footer') %>